<html ng-app="timesTrailer" ng-cloak>

<head>
    <script src="js/vendor/jquery.min.js"></script>
    <script src="adcom/js/bootstrap.js"></script>
    <script src="adcom/js/adcom.js"></script>
    <link rel="stylesheet" type="text/css" href="adcom/dist/css/adcom.css">
    <link rel="stylesheet" type="text/css" href="css/style.css">
    <link rel="stylesheet" type="text/css" href="css/assets.css">
    <link rel=”shortcut icon” href=”/favicon.ico”>
    <script src="js/vendor/jquery-ui.min.js"></script>
    <script src="js/vendor/underscore-min.js"></script>
    <script src="js/vendor/angular.min.js"></script>
    <script src="js/vendor/whammy.js"></script>
    <script src="js/vendor/fabric.js"></script>
    <script src="js/vendor/ui-bootstrap-tpls-0.13.0.min.js"></script>
    <script src="js/vendor/angular-dragdrop.min.js"></script>
    <script src="js/controllers/CanvasCtrl.js"></script>
    <script src="js/services/ConfigService.js"></script>
    <script src="js/services/TimelineService.js"></script>
    <script src='js/services/AssetService.js'></script>
    <script src="js/controllers/EditorCtrl.js"></script>
    <script src="js/controllers/AssetCtrl.js"></script>
    <script src="js/controllers/TimelineCtrl.js"></script>
</head>

<body ng-init="initialize()" ng-controller="CanvasCtrl">
    <h1 id="title">Times Trailer</h1>
    <div class="left">
        <div id="modeWrapper">
            <input class="btn btn-sm btn-primary" ng-click="createSlides()" id="create" value="Queue" type="button">
            <input class="btn btn-sm btn-primary" ng-click="playSlides()" id="play" value="Play" type="button">
            <input class="btn btn-sm btn-primary" ng-click="toggleView()" id="toggle" value="Toggle" type="button">
            <span id="videoMode">{{videoMode}}</span>
        </div>
        <div id="mediaWrapper">
            <canvas ng-show="showCanvas" id="canvas" class="media" width="600" height="400"></canvas>
            <video ng-show="!showCanvas" id="player" class="media" width="600" height="400" controls></video>
            <!-- <div class="progress progress-striped">
                <div class="progress-bar" ng-style="{width: (getPercentage()+'%')}">
                    <span> rendering video </span>
                </div>
            </div> -->
        </div>
        <div ng-controller="TimelineCtrl as loki">
            <div id="timeline" class="slideup">
                <input class="btn btn-sm btn-primary" ng-click="slide()" value="reveal/hide" type="button">
                <div="templates" style="display:none">
                    <img id="ender" src="assets/slides/ender.jpg">
                </div="templates">
                <div class='slideWrapper'>
                    <ul class="row-fluid">
                        <li class="slideView" ng-repeat="item in slides" data-drop="true" ng-model='slides' jqyoui-droppable="{index: {{$index}}, onDrop:'loki.dropCallback(item.title, $index)', animate:true}">
                            <div class="thumbnail2" data-drag="{{item.drag}}" data-jqyoui-options="{revert: 'invalid'}" ng-model="slides" jqyoui-draggable="{index: {{$index}},animate:true}">
                                <img src="{{item.thumb}}">
                                <span>{{item.duration/1000}} secs</span>
                            </div>
                        </li>
                    </ul>
                </div>
            </div>
        </div>
    </div>

    <div class="right">
        <div ng-controller="AssetCtrl" class="assets">
            <tabset class="assets-tabs container-fluid">
                <tab heading="Metadata">
                    <div class="assets-scroll">
                        <div class="asset-container metadata" ng-repeat="info in assets.metadata">
                            <div class="asset-key">{{info.name}}</div>
                            <div class="asset-tooltip">{{info.text || 'unavailable'}}</div>
                        </div>
                    </div>
                </tab>
                <tab class="container-flud" heading="Images">
                    <div class="assets-scroll">
                        <div class="row nomargin">
                            <div class=" col-md-4 asset-container" ng-repeat="(index, image) in assets.images">
                                <img class="thumbnail" crossorigin="anonymous" ng-click="$parent.chooseImage('image' + index)" id="image{{index}}" ng-src="{{image.url}}">
                            </div>
                        </div>
                    </div>
                </tab>
                <tab heading="Quotes">
                    <div class="assets-scroll">
                        <div class="quote-container asset-container" ng-repeat="quote in assets.quotes">
                            <div class="asset-value quote">
                                "{{quote}}"
                            </div>
                        </div>
                    </div>
                </tab>
            </tabset>
        </div>
        <form ng-init="initialize()" ng-controller="EditorCtrl">
            <fieldset class="editor">
                <legend>Overlay</legend>
                <label for="overlay">Overlay? </label>
                <input ng-model="overlay.enabled" id="overlay" type="checkbox" />
                <div class="form-group form-inline">
                    <label class="control-label">Automatic Placement</label>
                        <select class="form-control" ng-model="autoPosition" ng-options="option.label for option in autoPositions track by option.value" id="position">
                        </select>
                        <input class="form-control" ng-model="overlay.opacity" type="number" min="0" max="1" id="overlay-opacity" step=".1">
                        <div class="form-group">
                            <input class="form-control" ng-model="overlay.overlayColor" type="color" id="overlay-color">
                        </div>
                </div>
                <div id="size" class="form-group form-inline">
                    <label class="control-label">X</label>
                    <input class="form-control" ng-model="manualPosition[0]" type="number" id="manual-x">
                    <label class="control-label">Y</label>
                    <input class="form-control" ng-model="manualPosition[1]" type="number" id="manual-y">
                    <br>
                    <label class="control-label">Width</label>
                    <input class="form-control" ng-model="manualPosition[2]" id="width" type="text" placeholder="width">
                    <label class="control-label">Height</label>
                    <input class="form-control" ng-model="manualPosition[3]" id="height" type="text" placeholder="height">
                </div>
            </fieldset>
            <fieldset id="text" class="editor">
                <legend>Text</legend>
                <div class="form-group form-inline">
                    <input class="form-control" ng-model="text.content" placeholder="text here" id="text-content" type="text" />
                    <input class="form-control" ng-model="text.size" placeholder="font-size" id="font-size" type="text" />
                    <div id="font-button" dropdown dropdown-append-to-body>
                        <button class="btn btn-primary" dropdown-toggle class="dropdown" style="font-family:{{text.font}}">Choose Font</button>
                        <ul role="menu" class="dropdown-menu" id="font-holder">
                            <li ng-repeat="font in fonts" id="{{font}}" class="font-family" ng-class="{'active': font == text.font}" style="font-family:{{font}}" ng-click="text.font = font">{{font}}</li>
                        </ul>
                    </div>
                </div>
                <div class="form-group">
                    <input class="form-control" ng-model="text.color" type="color" id="text-color" />
                </div>
            </fieldset>
            <fieldset>
                <input class="btn btn-sm btn-primary" value="draw" type="button" ng-click="saveConfigs(true);" />
                <input class="btn btn-sm btn-primary" value="clear" type="button" ng-click="$parent.clearCanvas()" />
                <a id="download-link" download="example.webm" href="">
                    <input class="btn btn-sm btn-primary" value="download" type="button" />
                </a>
            </fieldset>
        </form>
    </div>
    <script type="text/javascript" src="js/app.js"></script>
</body>

</html>
