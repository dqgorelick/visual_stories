<html ng-app="timesTrailer" ng-cloak>
<head>
    <link rel="stylesheet" type="text/css" href="css/style.css">
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/underscore.js/1.8.3/underscore-min.js"></script>
    <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/angularjs/1.3.15/angular.min.js"></script>
    <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.4/jquery.min.js"></script>
    <script type="text/javascript" src="../js/whammy.js"></script>
    <script type="text/javascript" src="js/fabric.js"></script>
    <script src="../js/controllers/CanvasCtrl.js"></script>
    <script type="text/javascript" src="../js/services/ConfigService.js"></script>
    <script type="text/javascript" src='../js/services/AssetService.js'></script>
    <script type="text/javascript" src="../js/controllers/EditorCtrl.js"></script>
    <script type="text/javascript" src="../js/controllers/AssetCtrl.js"></script>
    <script type="text/javascript" src="js/editor.js"></script>

</head>
<body ng-init="initialize()" ng-controller="CanvasCtrl">
<h1 id="title">Times Trailer</h1>
<div class="left">
    <canvas id="canvas" width="600" height="400" id="canvas"></canvas>
    <form ng-init="initialize()" ng-controller="EditorCtrl">
        <fieldset class="editor">
        <legend>Overlay</legend>
            <label for="overlay">Overlay? </label>
            <input  ng-model="overlay.enabled" id="overlay" type="checkbox" />
            <br>
        Automatic Placement
            <select ng-model="autoPosition" ng-options="option.label for option in autoPositions track by option.value" id="position">
            </select>
            <input ng-model="overlay.opacity" type="number" min="0" max="1" id="overlay-opacity" step=".1">
            <input ng-model="overlay.overlayColor" type="color" id="overlay-color" >
            <div id="size">
                Manual Placement: Top Left Corner X:
                <input ng-model="manualPosition[0]" type="number" id="manual-x" > Y:
                <input ng-model="manualPosition[1]" type="number" id="manual-y" > SIZE:
                <input ng-model="manualPosition[2]" id="width" type="text" placeholder="width" >x
                <input ng-model="manualPosition[3]" id="height" type="text" placeholder="height" >
            </div>
        </fieldset>
        <fieldset id="text" class="editor">
            <legend>Text</legend>
            <input ng-model="text.content" placeholder="text here" id="text-content" type="text" />
            <input ng-model="text.color" type="color" id="text-color" />
            <input ng-model="text.size" placeholder="font-size" id="font-size" type="text" />
            <div id="font-holder">
                <div ng-repeat="font in fonts" id="{{font}}" class="font-family" ng-class="{'active': font == text.font}" style="font-family:{{font}}" ng-click="text.font = font">{{font}}</div>
            </div>
        </fieldset>
        <fieldset>
            <input value="draw" type="button" ng-click="saveConfigs(true);" />
            <input value="clear" type="button" ng-click="$parent.clearCanvas()"/>
            <input id="save" value="save" type="button"/>
            <a id="download-link" download="example.webm" href="">Download .webm File</a>
            <input type="button" value="addFrame" ng-click="$parent.addFrame()"/>
            <input type="button" value="write video" onclick="$parent.finalizeVideo()"/>
        </fieldset>
        <fieldset>
            <input id="saveSlide" value="saveSlide" type="button">
            <input id="load" value="load" type="button">
        </fieldset>
    </form>
    <video id="awesome" width="300" height="300" controls></video>
</div>


<!-- Data selection -->
<div>
    <div class="wrapper">
        <div ng-controller="AssetCtrl" class="right content" >
            <div id="controls">
                <button ng-click="getArticle()" name="load">Load</button>
                <button ng-click="showText = !showText" name="text">Toggle text</button>
                <button ng-click="showPhoto = !showPhoto" name="photos">Toggle photos</button>
            </div>
            <div ng-show="showText" ng-repeat="(index, element) in elements">
                <div ng-if="element.text">
                    <hr>
                    <h2> SECTION: {{element.name}} </h2>
                    <div class="component">
                        <h2>{{element.text}}</h2>
                    </div>
                </div>
            </div>
            <div ng-show="showPhoto" ng-repeat="(index, image) in images">
                <hr>
                <h2> IMAGE {{index}} </h2>
                <div class="component">
                    <img crossorigin="anonymous" ng-click="$parent.chooseImage('image', index)" id="image{{index}}" ng-src="{{image.url}}">
                    <h3 id="imageCaption{{index}}">{{image.caption}}</h3>
                    <p id="imageCredit{{index}}"> {{image.credit}}</p>
                </div>
            </div>
            <div ng-show="showPhoto" ng-repeat="(index, image) in slideshow">
                <hr>
                <h2> SLIDESHOW {{index}} </h2>
                <div class="component">
                    <img crossorigin="anonymous" ng-click="$parent.chooseImage('slideshow', index)" id="slideshow{{index}}" ng-src="{{image.url}}">
                    <h3 id="slideshowCaption{{index}}" ng-bind-html="trustHTML(image.caption)"></h3>
                    <p id="slideshowCredit{{index}}">{{image.credit}}</p>
                </div>
            </div>
        </div>
    </div>
    <div id="timeline">
    </div>
</div>
<script type="text/javascript" src="js/app.js"></script>
</body>
</html>
