<html ng-app="timesTrailer" ng-cloak>

<head>
    <script type="text/javascript" src="js/vendor/jquery.min.js"></script>
    <script type="text/javascript" src="adcom/js/bootstrap.js"></script>
    <script type="text/javascript" src="adcom/js/adcom.js"></script>
    <link rel="stylesheet" type="text/css" href="adcom/dist/css/adcom.css">
    <link rel="stylesheet" type="text/css" href="css/style.css">
    <link rel="stylesheet" type="text/css" href="css/assets.css">
    <script type="text/javascript" src="js/vendor/underscore-min.js"></script>
    <script type="text/javascript" src="js/vendor/angular.min.js"></script>
    <script type="text/javascript" src="js/vendor/whammy.js"></script>
    <script type="text/javascript" src="js/vendor/fabric.js"></script>
    <script type="text/javascript" src="js/vendor/ui-bootstrap-tpls-0.13.0.min.js"></script>
    <script type="text/javascript" src="js/controllers/CanvasCtrl.js"></script>
    <script type="text/javascript" src="js/services/ConfigService.js"></script>
    <script type="text/javascript" src="js/services/TimelineService.js"></script>
    <script type="text/javascript" src='js/services/AssetService.js'></script>
    <script type="text/javascript" src="js/controllers/EditorCtrl.js"></script>
    <script type="text/javascript" src="js/controllers/AssetCtrl.js"></script>
    <script type="text/javascript" src="js/controllers/TimelineCtrl.js"></script>
</head>

<body ng-init="initialize()" ng-controller="CanvasCtrl">
    <h1 id="title">Times Trailer</h1>
    <div class="left">
        <canvas id="canvas" width="600" height="400" id="canvas"></canvas>
        <div ng-controller="TimelineCtrl" >
            <div id="options">
            </div>
            <div id="timeline">
                <div="templates" style="display:none">
                    <img id="ender" src="assets/slides/ender.jpg">
                </div="templates">
        <!--         <button ng-click="save()">Save slide</button>
                <button ng-click="load()">Load slides</button>
                <button ng-click="clear()">Clear storage</button>
                <button ng-click="print()">print</button> -->
                <!-- <p> Status {{status}} </p> -->
                <input class="btn btn-sm btn-primary" ng-click="editSlide()" id="edit" value="edit" type="button">
            </div>
        </div>
    </div>
    <div class="right">
        <form ng-init="initialize()" ng-controller="EditorCtrl">
            <fieldset class="editor">
                <legend>Overlay</legend>
                <label for="overlay">Overlay? </label>
                <input ng-model="overlay.enabled" id="overlay" type="checkbox" />
                <div class="form-group">
                    <label class="control-label">Automatic Placement</label>
                    <div class="control-input">
                        <select class="form-control" ng-model="autoPosition" ng-options="option.label for option in autoPositions track by option.value" id="position">
                        </select>
                    </div>
                </div>
                <div class="form-group">
                    <div class="control-input">
                        <input class="form-control" ng-model="overlay.opacity" type="number" min="0" max="1" id="overlay-opacity" step=".1">
                    </div>
                </div>
                <div class="form-group">
                    <div clas="control-input">
                        <input class="form-control" ng-model="overlay.overlayColor" type="color" id="overlay-color">
                    </div>
                </div>
                <div id="size" class="form-group form-inline">
                    <label class="control-label">X</label>
                    <input class="form-control" ng-model="manualPosition[0]" type="number" id="manual-x">
                    <label class="control-label">Y</label>
                    <input class="form-control" ng-model="manualPosition[1]" type="number" id="manual-y">
                    <br>
                    <label class="control-label">Width</label>
                    <input class="form-control" ng-model="manualPosition[2]" id="width" type="text" placeholder="width">
                    <label class="control-label">Height</label>
                    <input class="form-control" ng-model="manualPosition[3]" id="height" type="text" placeholder="height">
                </div>
            </fieldset>
            <fieldset id="text" class="editor">
                <legend>Text</legend>
                <div class="form-group">
                    <input class="form-control" ng-model="text.content" placeholder="text here" id="text-content" type="text" />
                </div>
                <div class="form-group">
                    <input class="form-control" ng-model="text.color" type="color" id="text-color" />
                </div>
                <div class="form-group">
                    <input class="form-control" ng-model="text.size" placeholder="font-size" id="font-size" type="text" />
                </div>
                <div id="font-holder">
                    <div ng-repeat="font in fonts" id="{{font}}" class="font-family" ng-class="{'active': font == text.font}" style="font-family:{{font}}" ng-click="text.font = font">{{font}}</div>
                </div>
            </fieldset>
            <fieldset>
                <input class="btn btn-sm btn-primary" value="draw" type="button" ng-click="saveConfigs(true);" />
                <input class="btn btn-sm btn-primary" value="clear" type="button" ng-click="$parent.clearCanvas()" />
                <input class="btn btn-sm btn-primary" id="save" value="save" type="button" />
                <a id="download-link" download="example.webm" href="">Download .webm File</a>
                <input class="btn btn-sm btn-primary" type="button" value="addFrame" ng-click="$parent.addFrame()" />
                <input class="btn btn-sm btn-primary" type="button" value="write video" ng-click="$parent.finalizeVideo()" />
            </fieldset>
            <fieldset>
                <input class="btn btn-sm btn-primary" ng-click="createSlides()" id="create" value="create" type="button">
                <input class="btn btn-sm btn-primary" ng-click="playSlides()" id="play" value="play" type="button">
            </fieldset>
        </form>
        <video id="awesome" width="300" height="300" controls></video>
    </div>
    <!-- Data selection -->
    <div ng-controller="AssetCtrl" class="assets">
        <tabset>
            <tab heading="Metadata">
                <div class="asset-container" ng-repeat="info in assets.metadata">
                    <div class="asset-key">{{info.name}}</div>
                    <div class="asset-tooltip">{{info.text}}</div>
                </div>
            </tab>
            <tab heading="Images">
                <div class="asset-container" ng-repeat="(index, image) in assets.images">
                    <img class="thumbnail" crossorigin="anonymous" ng-click="$parent.chooseImage(this.id)" id="image{{index}}" ng-src="{{image.url}}">
                </div>
            </tab>
            <tab heading="Quotes">
                <div class="image asset-container" ng-repeat="quote in assets.quotes">
                    <div class="asset-value quote">
                        {{quote}}
                    </div>
                </div>
            </tab>
        </tabset>
    </div>

    <script type="text/javascript" src="js/app.js"></script>
</body>

</html>
